---
layout:     post
title:      Kæ•°ä¹‹å’Œ
subtitle:   åœ¨ä¸€ä¸ªæ•°ä¸­å°†æ‰€æœ‰ç›¸åŠ ç­‰äºä¸€ä¸ªç‰¹å®šçš„æ•°çš„æƒ…å†µåˆ—ä¸¾å‡ºæ¥ã€‚ï¼ˆå¯ä»¥ç”¨æ¥å‡‘å•ğŸ¤£ï¼‰
date:       2019-11-12
author:     Trojan
header-img: img/post-bg-54.jpg
catalog: true
tags:
    - C#
    - ç®—æ³•
---

## Kæ•°ä¹‹å’Œ

### æè¿°

ç»™å®š N ä¸ªä¸åŒçš„æ•´æ•°æ•°ç»„å’Œä¸€ä¸ªç›®æ ‡æ•°å­—ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾å‡ºç›¸åŠ ç­‰äºè¿™ä¸ªæ•°å­—çš„æ‰€æœ‰æƒ…å†µã€‚

### æ ·ä¾‹
```
int nums[] = { 10,20,30,40,50,60,70,80,90,100 };
è¾“å‡ºï¼š
[[100]
[90,10]
[80,20]
[70,30]
[20,70,10]
[60,40]
[30,60,10]
[40,50,10]
[30,50,20]
[20,30,40,10]]
```

###æ€è·¯ï¼š

> æ²¡å•¥æ€è·¯ç›´æ¥ä¸Šdfs æš´åŠ›ç ´è§£
```C++
#include <iostream>
#define GET_ARRAY_LEN(array,len){len=(sizeof(array)/sizeof(array[0]));}
using namespace std;



int res[100], k = 0, len, targer;

void sumOfKNumber(int* nums, int n, int sum) {
	if (n <= 0 || sum < 0) return;

	if (sum == 0) {
		if (n < len && nums[n] == targer) {
			cout << nums[n] << endl;
		}
	}
	if (k > 0)
	{
		if (sum == nums[n - 1]) {
			for (int i = k - 1; i >= 0; --i)
				cout << res[i] << "+";
			cout << nums[n - 1] << endl; // è¾“å‡ºæ—¶è¯¥å…ƒç´ è¿˜æœªåŠ å…¥æ•°ç»„
		}
	}
	// è€ƒè™‘å–ç¬¬å‡ ä¸ªæ•°
	res[k++] = nums[n - 1];
	sumOfKNumber(nums, n - 1, sum - nums[n - 1]);
	k--;
	sumOfKNumber(nums, n - 1, sum);
}

int main()
{
	int nums[] = { 10,20,30,40,50,60,70,80,90,100 };
	targer = 100;
	GET_ARRAY_LEN(nums, len);
	sumOfKNumber(nums, len, targer);
}


```


### åº”ç”¨   

> ç®—æ³•å†™å‡ºæ¥å½“ç„¶æ˜¯è¦æœ‰åœ°æ–¹å¯ä»¥ç”¨ï¼Œä¸ç„¶åªä¸ºäº†åˆ·é¢˜çš„è¯é‚£å°†æ¯«æ— æ„ä¹‰ã€‚

å°è£…æˆC# ä»£ç 
é¡ºä¾¿ä¼˜åŒ–äº†ä¸€ä¸‹ï¼Œä¸ç­‰äºå›ºå®šçš„æ•°å€¼è€Œæ˜¯å¯»æ‰¾ç›¸è¿‘çš„å€¼ã€‚

SumOfKNumber.cs
```csharp
public class SumOfKNumber<T> where T : struct
{
    private readonly List<decimal> _nums;
    private readonly decimal _sum;
    private readonly bool _lessThan;
    public List<List<decimal>> NumList;
    private readonly decimal[] _res;
    private int k = 0;
    private decimal _max = 0;
    /// <summary>
    /// æ±‚æœ€æ¥è¿‘çš„é‚£ä¸ªå€¼
    /// </summary>
    /// <param name="numEnums">æ•°ç»„</param>
    /// <param name="sum">å’Œä¸ºå¤šå°‘</param>
    /// <param name="lessThan">æ˜¯å¦å°äºè¿™ä¸ªå’Œ</param>
    public SumOfKNumber(IEnumerable<T> numEnums, T sum, bool lessThan = false)
    {
        _nums = numEnums.Select(s => (decimal)(dynamic)s).ToList();
        _sum = (decimal)(dynamic)sum;
        _lessThan = lessThan;
        _res = new Decimal[_nums.Count];
        NumList = new List<List<decimal>>();
    }
    /// <summary>
    /// è·å–åˆ—è¡¨æšä¸¾
    /// </summary>
    /// <returns></returns>
    public IEnumerable<IEnumerable<T>> GetNumList()
    {
        Sum(_nums, _nums.Count, (decimal)(dynamic)GetListMax());
        return NumList.Select(s => s.Select(ss => (T)(dynamic)ss));
    }
    //è·å–æœ€å¤§å€¼
    private void Sum(IReadOnlyList<decimal> numEnums, int n, decimal sum)
    {
        if (n <= 0) return;
        if (sum.Equals(0))
        {
            if (n < numEnums.Count && numEnums[n].Equals(_sum))
            {
                //Console.WriteLine(_sum + " = " + numEnums[n]);
                NumList.Add(new List<decimal>() { numEnums[n] });
            }
            return;
        }
        if (k > 0)
        {
            if (sum.Equals(numEnums[n - 1]))
            {
                var list = new List<decimal>();
                //Console.Write(_sum + " = ");
                for (var i = k - 1; i >= 0; --i)
                {
                    //Console.Write(_res[i] + "+");
                    list.Add(_res[i]);
                }
                list.Add(numEnums[n - 1]);
                //Console.WriteLine(numEnums[n - 1]);
                NumList.Add(list);
            }
        }
        _res[k++] = numEnums[n - 1];
        Sum(numEnums, n - 1, sum - numEnums[n - 1]);
        k--;
        // ReSharper disable once TailRecursiveCall
        Sum(numEnums, n - 1, sum);
    }
    /// <summary>
    /// è·å–æœ€å¤§å€¼
    /// </summary>
    /// <returns></returns>
    public T GetListMax()
    {
        if (_max != 0)
        {
            return (T)(dynamic)_max;
        }
        HashSet<decimal> hashSet = new HashSet<decimal>() { 0 };
        foreach (var num in _nums)
        {
            int count = hashSet.Count - 1;
            var list = hashSet.ToArray();
            for (int i = count; i >= 0; --i)
            {
                hashSet.Add(list[i] + num);
            }
        }
        if (_lessThan)
        {
            // å°äºç­‰äº 100
            var enumerable = hashSet.ToList().Where(w => w <= _sum);
            _max = enumerable.Max();
        }
        else
        {
            // æ‰¾æœ€ç¬¦åˆçš„é‚£ä¸ªæ•°
            var enumerable = hashSet.ToList();
            enumerable.Sort();
            decimal flag = Decimal.MaxValue;
            foreach (var item in enumerable)
            {
                var abs = Math.Abs(_sum - item);
                if (abs < flag)
                {
                    flag = abs;
                    _max = item;
                }
                else
                {
                    break;
                }
            }
        }
        return (T)(dynamic)_max;
    }
}
```

ä½¿ç”¨ï¼š   
```csharp
class Program
{
    static void Main(string[] args)
    {
        var nums = new List<float>() { 10, 10.2f, 20, 30, 40, 50, 60, 70, 80, 90, 100 };
        Console.WriteLine("===========test1==========");
        var test1 = new SumOfKNumber<float>(nums, 100.2f);
        var max1 = test1.GetListMax();
        var list1 = test1.GetNumList();
        Print(list1, max1);
        Console.WriteLine("===========test2==========");
        var test2 = new SumOfKNumber<float>(nums, 100.2f, true);
        var max2 = test2.GetListMax();
        var list2 = test2.GetNumList();
        Print(list2, max2);
    }
    static void Print<T>(IEnumerable<IEnumerable<T>> list, T max) where T : struct
    {
        foreach (var items in list)
        {
            var nums = items.ToList();
            Console.Write(max + " = ");
            for (int i = 0; i < nums.Count(); i++)
            {
                if (i == items.Count() - 1)
                {
                    Console.Write(nums[i]);
                }
                else
                {
                    Console.Write(nums[i] + "+");
                }
            }
            Console.WriteLine();
        }
    }
}
```   
<center>

![20191112175818.png](http://images.oulongxing.com//blog/20191112175818.png?imageMogr2/thumbnail/!50p)

</center>
### åº”ç”¨åœºæ™¯
ç›®å‰åªæƒ³åˆ°äº†å‡‘å•ã€‚ã€‚ã€‚ã€‚ã€‚ğŸ˜…å¯èƒ½ä¹Ÿæ˜¯å› ä¸ºåŒåä¸€åˆšè¿‡çš„åŸå› å§ã€‚
